<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aurora - Polymarket Trading</title>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
<style>
:root { --cyan: #00f5ff; --green: #00ff88; --red: #ff3366; --bg: #030508; --card: rgba(10,20,40,0.95); --border: rgba(0,245,255,0.2); }
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Rajdhani', sans-serif; background: var(--bg); color: #e0f4ff; }
#canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; }
.container { position: relative; z-index: 10; max-width: 1400px; margin: 0 auto; padding: 70px 20px 20px; }
.header { position: fixed; top: 0; left: 0; right: 0; height: 55px; background: rgba(3,5,8,0.98); border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; padding: 0 30px; z-index: 100; }
.logo { font-family: 'Orbitron'; font-size: 18px; font-weight: 900; background: linear-gradient(135deg, var(--cyan), var(--green)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
.stats-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px; }
.stat-box { background: var(--card); border: 1px solid var(--border); border-radius: 10px; padding: 15px; text-align: center; }
.stat-box h3 { font-size: 11px; color: #6a7a8a; text-transform: uppercase; margin-bottom: 5px; }
.stat-box .value { font-size: 24px; font-weight: 700; font-family: 'Orbitron'; }
.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
.card { background: var(--card); border: 1px solid var(--border); border-radius: 10px; padding: 20px; }
.card h2 { font-family: 'Orbitron'; font-size: 14px; color: var(--cyan); margin-bottom: 15px; }
.market-row { display: flex; justify-content: space-between; padding: 10px; margin: 5px 0; background: rgba(0,0,0,0.3); border-radius: 6px; cursor: pointer; }
.market-row:hover { background: rgba(0,245,255,0.1); }
.market-question { font-weight: 500; }
.market-prices { display: flex; gap: 15px; }
.yes-price { color: var(--green); }
.no-price { color: var(--red); }
.trade-form { margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 8px; }
.trade-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px; }
.trade-col { padding: 15px; background: rgba(0,0,0,0.4); border-radius: 8px; }
.trade-col h4 { margin-bottom: 10px; }
.btn { padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; font-weight: 700; width: 100%; margin-top: 10px; }
.btn-yes { background: var(--green); color: #000; }
.btn-no { background: var(--red); color: #fff; }
.trade-item { padding: 10px; margin: 5px 0; background: rgba(0,0,0,0.3); border-left: 3px solid var(--cyan); border-radius: 5px; }
.trade-win { border-left-color: var(--green); }
.trade-loss { border-left-color: var(--red); }
select, input { padding: 10px; background: rgba(0,0,0,0.5); border: 1px solid var(--border); color: #fff; border-radius: 6px; width: 100%; }
select:focus, input:focus { outline: none; border-color: var(--cyan); }
.status-dot { width: 8px; height: 8px; border-radius: 50%; display: inline-block; margin-right: 5px; }
.status-dot.green { background: var(--green); }
.status-dot.red { background: var(--red); }
#loading { position: fixed; inset: 0; background: var(--bg); display: flex; align-items: center; justify-content: center; z-index: 1000; }
.loader { width: 50px; height: 50px; border: 3px solid transparent; border-top-color: var(--cyan); border-radius: 50%; animation: spin 1s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }
</style>
</head>
<body>
<div id="loading"><div class="loader"></div></div>
<canvas id="canvas"></canvas>
<div class="header">
    <div class="logo">â—† AURORA - POLYMARKET</div>
    <div><span class="status-dot green"></span><span id="status">Paper Trading</span></div>
</div>
<div class="container">
    <div class="stats-row">
        <div class="stat-box"><h3>Balance</h3><div class="value cyan" id="balance">$1000.00</div></div>
        <div class="stat-box"><h3>Trades</h3><div class="value" id="trades">0</div></div>
        <div class="stat-box"><h3>Win Rate</h3><div class="value green" id="winRate">0%</div></div>
        <div class="stat-box"><h3>P&L</h3><div class="value" id="pnl">$0.00</div></div>
    </div>
    <div class="grid-2">
        <div class="card">
            <h2>ðŸŽ¯ ACTIVE MARKETS</h2>
            <div id="marketsList">
                <div style="color:#6a7a8a">Loading markets...</div>
            </div>
        </div>
        <div class="card">
            <h2>ðŸ’° PLACE TRADE</h2>
            <select id="marketSelect"><option>Select a market...</option></select>
            <div class="trade-form" id="tradeForm" style="display:none">
                <div class="trade-row">
                    <div class="trade-col">
                        <h4 class="yes-price">YES</h4>
                        <div id="yesPrice">$0.00</div>
                        <input type="number" id="yesAmount" placeholder="USDC" value="10" min="1">
                        <button class="btn btn-yes" onclick="placeTrade('YES')">BUY YES</button>
                    </div>
                    <div class="trade-col">
                        <h4 class="no-price">NO</h4>
                        <div id="noPrice">$0.00</div>
                        <input type="number" id="noAmount" placeholder="USDC" value="10" min="1">
                        <button class="btn btn-no" onclick="placeTrade('NO')">BUY NO</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card" style="margin-top:20px">
        <h2>ðŸ“œ TRADE HISTORY</h2>
        <div id="tradeHistory">
            <div style="color:#6a7a8a">No trades yet</div>
        </div>
    </div>
</div>
<script>
// State
let balance = 1000;
let trades = [];
let markets = [];
let selectedMarket = null;

// Three.js background
var scene, camera, renderer, particles, t=0;
function init3D() {
    scene = new THREE.Scene(); scene.background = new THREE.Color(0x030508);
    camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000); camera.position.z = 25;
    renderer = new THREE.WebGLRenderer({canvas:document.getElementById('canvas'), antialias:true}); renderer.setSize(window.innerWidth, window.innerHeight);
    var g = new THREE.BufferGeometry(), c = 1500, p=new Float32Array(c*3), cl=new Float32Array(c*3);
    for(var i=0;i<c;i++){p[i*3]=(Math.random()-0.5)*60;p[i*3+1]=(Math.random()-0.5)*60;p[i*3+2]=(Math.random()-0.5)*30;var C=new THREE.Color();C.setHSL(0.5+Math.random()*0.2,0.8,0.5);cl[i*3]=C.r;cl[i*3+1]=C.g;cl[i*3+2]=C.b;}
    g.setAttribute('position',new THREE.BufferAttribute(p,3));g.setAttribute('color',new THREE.BufferAttribute(cl,3));
    particles = new THREE.Points(g,new THREE.PointsMaterial({size:0.1,vertexColors:true,transparent:true,opacity:0.8,blending:THREE.AdditiveBlending})); scene.add(particles);
    var grid = new THREE.GridHelper(60,30,0x00f5ff,0x0a1520); grid.position.y=-12; scene.add(grid);
    animate();
}
function animate(){requestAnimationFrame(animate);t+=0.001;particles.rotation.y=t*0.1;camera.position.x=Math.sin(t)*3;camera.position.y=Math.cos(t*0.7)*2;camera.lookAt(0,0,0);renderer.render(scene,camera);}

// Fetch markets
async function fetchMarkets() {
    try {
        var res = await fetch('https://gamma-api.polymarket.com/markets?active=true');
        var data = await res.json();
        markets = data.slice(0, 15);
        renderMarkets();
    } catch(e) { console.log(e); }
}

function renderMarkets() {
    var list = document.getElementById('marketsList');
    var select = document.getElementById('marketSelect');
    list.innerHTML = ''; select.innerHTML = '<option value="">Select a market...</option>';
    
    markets.forEach(function(m, i) {
        var yes = m.tokens ? parseFloat(m.tokens[0].price || 0).toFixed(2) : '0.00';
        var no = m.tokens ? parseFloat(m.tokens[1].price || 0).toFixed(2) : '0.00';
        
        list.innerHTML += '<div class="market-row" onclick="selectMarket(' + i + ')"><div class="market-question">' + (m.question || 'Market').substring(0,40) + '</div><div class="market-prices"><span class="yes-price">$' + yes + '</span><span class="no-price">$' + no + '</span></div></div>';
        select.innerHTML += '<option value="' + i + '">' + (m.question || 'Market').substring(0,35) + '</option>';
    });
}

function selectMarket(i) {
    selectedMarket = markets[i];
    document.getElementById('tradeForm').style.display = 'block';
    document.getElementById('yesPrice').textContent = '$' + (selectedMarket.tokens ? parseFloat(selectedMarket.tokens[0].price).toFixed(2) : '0.00');
    document.getElementById('noPrice').textContent = '$' + (selectedMarket.tokens ? parseFloat(selectedMarket.tokens[1].price).toFixed(2) : '0.00');
    document.getElementById('marketSelect').value = i;
}

document.getElementById('marketSelect').addEventListener('change', function() {
    if(this.value !== '') selectMarket(parseInt(this.value));
});

function placeTrade(side) {
    var amount = parseFloat(side === 'YES' ? document.getElementById('yesAmount').value : document.getElementById('noAmount').value);
    if(!amount || amount <= 0 || !selectedMarket) return;
    
    var price = side === 'YES' ? (selectedMarket.tokens ? parseFloat(selectedMarket.tokens[0].price) : 0.5) : (selectedMarket.tokens ? parseFloat(selectedMarket.tokens[1].price) : 0.5);
    var shares = amount / price;
    var profit = (side === 'YES' ? (price > 0.5 ? shares * (1 - price) : -amount * 0.1) : (price < 0.5 ? shares * (1 - price) : -amount * 0.1));
    
    balance -= amount;
    trades.push({
        market: (selectedMarket.question || 'Market').substring(0,30),
        side: side,
        amount: amount,
        price: price,
        profit: profit,
        result: profit >= 0 ? 'WIN' : 'LOSS',
        time: new Date().toLocaleTimeString()
    });
    
    updateStats();
    renderTrades();
}

function updateStats() {
    document.getElementById('balance').textContent = '$' + balance.toFixed(2);
    document.getElementById('trades').textContent = trades.length;
    var wins = trades.filter(function(t) { return t.result === 'WIN'; }).length;
    document.getElementById('winRate').textContent = (trades.length > 0 ? (wins/trades.length*100).toFixed(0) : 0) + '%';
    var totalPnl = trades.reduce(function(s, t) { return s + t.profit; }, 0);
    document.getElementById('pnl').textContent = (totalPnl >= 0 ? '+' : '') + '$' + totalPnl.toFixed(2);
    document.getElementById('pnl').style.color = totalPnl >= 0 ? '#00ff88' : '#ff3366';
}

function renderTrades() {
    var list = document.getElementById('tradeHistory');
    if(trades.length === 0) {
        list.innerHTML = '<div style="color:#6a7a8a">No trades yet</div>';
        return;
    }
    list.innerHTML = '';
    trades.slice().reverse().forEach(function(t) {
        list.innerHTML += '<div class="trade-item ' + (t.result === 'WIN' ? 'trade-win' : 'trade-loss') + '"><div><strong>' + t.side + '</strong> ' + t.market + '</div><div>' + t.time + '</div><div style="color:' + (t.profit >= 0 ? '#00ff88' : '#ff3366') + '">' + (t.profit >= 0 ? '+' : '') + '$' + t.profit.toFixed(2) + '</div></div>';
    });
}

window.onload = function() {
    init3D(); fetchMarkets();
    setTimeout(function(){document.getElementById('loading').style.display='none'},500);
};
window.onresize = function(){camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth,window.innerHeight);};
</script>
</body>
</html>
