<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AURORA OMEGA | Live Trading</title>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
<style>
:root { --cyan: #00f5ff; --green: #00ff88; --red: #ff3366; --bg-dark: #030508; --bg-card: rgba(10, 20, 40, 0.9); --border: rgba(0, 245, 255, 0.2); }
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Rajdhani', sans-serif; background: var(--bg-dark); color: #e0f4ff; overflow-x: hidden; }
#canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; }
.header { position: fixed; top: 0; left: 0; right: 0; height: 60px; background: linear-gradient(180deg, rgba(3,5,8,0.98), rgba(3,5,8,0.8)); border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; padding: 0 30px; z-index: 100; backdrop-filter: blur(10px); }
.logo { font-family: 'Orbitron', monospace; font-size: 22px; font-weight: 900; letter-spacing: 4px; background: linear-gradient(135deg, var(--cyan), var(--green)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
.status-dot { width: 10px; height: 10px; border-radius: 50%; animation: pulse 2s infinite; }
.status-dot.green { background: var(--green); box-shadow: 0 0 10px var(--green); }
.status-dot.red { background: var(--red); box-shadow: 0 0 10px var(--red); }
@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
.container { position: relative; z-index: 10; max-width: 1400px; margin: 0 auto; padding: 80px 20px 20px; }
.stats-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px; }
.stat-box { background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 20px; text-align: center; }
.stat-box h3 { font-family: 'Orbitron', monospace; font-size: 11px; color: #6a7a8a; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
.stat-box .value { font-size: 28px; font-weight: 700; font-family: 'Orbitron', monospace; }
.stat-box .value.green { color: var(--green); }
.stat-box .value.red { color: var(--red); }
.stat-box .value.cyan { color: var(--cyan); }
.ticker-row { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px; }
.ticker { background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 20px; text-align: center; }
.ticker .symbol { font-family: 'Orbitron', monospace; font-size: 18px; font-weight: 900; }
.ticker .price { font-size: 32px; font-weight: 700; margin: 10px 0; }
.ticker .change { font-size: 14px; }
.ticker .change.up { color: var(--green); }
.ticker .change.down { color: var(--red); }
.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
.card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 20px; }
.card h2 { font-family: 'Orbitron', monospace; font-size: 14px; color: var(--cyan); margin-bottom: 15px; letter-spacing: 2px; }
.trades-list { max-height: 400px; overflow-y: auto; }
.trade-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; margin-bottom: 8px; background: rgba(0,0,0,0.3); border-radius: 6px; border-left: 3px solid var(--cyan); }
.trade-item.win { border-left-color: var(--green); }
.trade-item.loss { border-left-color: var(--red); }
.trade-info { flex: 1; }
.trade-token { font-weight: 700; font-family: 'Orbitron', monospace; }
.trade-action { font-size: 11px; color: #6a7a8a; }
.trade-result { text-align: right; }
.trade-pnl { font-family: 'Orbitron', monospace; font-weight: 700; }
.trade-pnl.positive { color: var(--green); }
.trade-pnl.negative { color: var(--red); }
.chart-container { height: 200px; background: rgba(0,0,0,0.3); border-radius: 8px; position: relative; }
#pnlChart { width: 100%; height: 100%; }
.agents-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
.agent { padding: 15px; text-align: center; background: rgba(0,0,0,0.3); border-radius: 8px; border: 1px solid var(--border); }
.agent.active { border-color: var(--green); background: rgba(0,255,136,0.1); }
.agent-icon { font-size: 24px; }
.agent-name { font-size: 11px; margin-top: 5px; color: #6a7a8a; }
.agent.active .agent-name { color: var(--green); }
.loading { text-align: center; padding: 40px; color: #6a7a8a; }
#loading { position: fixed; inset: 0; background: var(--bg-dark); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1000; transition: opacity 0.5s; }
.loader { width: 60px; height: 60px; border: 3px solid transparent; border-top-color: var(--cyan); border-radius: 50%; animation: spin 1s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }
</style>
</head>
<body>
<div id="loading"><div class="loader"></div><div style="margin-top:20px;font-family:'Orbitron';color:var(--cyan)">CONNECTING TO AURORA...</div></div>
<canvas id="canvas"></canvas>
<div class="header">
    <div class="logo">‚óÜ AURORA OMEGA</div>
    <div style="display:flex;gap:20px;align-items:center">
        <div style="display:flex;align-items:center;gap:8px"><div class="status-dot green" id="statusDot"></div><span id="statusText">Connecting...</span></div>
    </div>
</div>
<div class="container">
    <div class="ticker-row">
        <div class="ticker"><div class="symbol">‚Çø BITCOIN</div><div class="price" id="btcPrice">$0</div><div class="change up" id="btcChange">+0.00%</div></div>
        <div class="ticker"><div class="symbol">Œû ETHEREUM</div><div class="price" id="ethPrice">$0</div><div class="change" id="ethChange">+0.00%</div></div>
    </div>
    <div class="stats-row">
        <div class="stat-box"><h3>Total Bank</h3><div class="value cyan" id="totalBank">$0</div></div>
        <div class="stat-box"><h3>Total P&L</h3><div class="value" id="totalPnl">$0</div></div>
        <div class="stat-box"><h3>Total Trades</h3><div class="value cyan" id="totalTrades">0</div></div>
        <div class="stat-box"><h3>Win Rate</h3><div class="value green" id="winRate">0%</div></div>
    </div>
    <div class="grid-2">
        <div class="card">
            <h2>üìä P&L CHART</h2>
            <div class="chart-container"><canvas id="pnlChart"></canvas></div>
        </div>
        <div class="card">
            <h2>ü§ñ AGENTS</h2>
            <div class="agents-grid">
                <div class="agent active" id="agent-aurora"><div class="agent-icon">üåô</div><div class="agent-name">AURORA</div></div>
                <div class="agent active" id="agent-hft"><div class="agent-icon">‚ö°</div><div class="agent-name">HFT</div></div>
                <div class="agent" id="agent-market"><div class="agent-icon">üåê</div><div class="agent-name">MARKET</div></div>
                <div class="agent" id="agent-risk"><div class="agent-icon">‚öñÔ∏è</div><div class="agent-name">RISK</div></div>
            </div>
            <div style="margin-top:20px">
                <h2 style="font-family:'Orbitron';font-size:14px;color:var(--cyan);margin-bottom:10px">üéØ AURORA STATS</h2>
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
                    <div><span style="color:#6a7a8a">Bank:</span> <span id="auroraBank" class="value green">$0</span></div>
                    <div><span style="color:#6a7a8a">P&L:</span> <span id="auroraPnl">$0</span></div>
                    <div><span style="color:#6a7a8a">Trades:</span> <span id="auroraTrades">0</span></div>
                    <div><span style="color:#6a7a8a">W/L:</span> <span id="auroraWL">0/0</span></div>
                </div>
            </div>
            <div style="margin-top:20px">
                <h2 style="font-family:'Orbitron';font-size:14px;color:var(--cyan);margin-bottom:10px">‚ö° HFT STATS</h2>
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
                    <div><span style="color:#6a7a8a">Bank:</span> <span id="hftBank" class="value green">$0</span></div>
                    <div><span style="color:#6a7a8a">P&L:</span> <span id="hftPnl">$0</span></div>
                    <div><span style="color:#6a7a8a">Trades:</span> <span id="hftTrades">0</span></div>
                    <div><span style="color:#6a7a8a">W/L:</span> <span id="hftWL">0/0</span></div>
                </div>
            </div>
        </div>
    </div>
    <div class="card" style="margin-top:20px">
        <h2>üéØ RECENT TRADES (REAL)</h2>
        <div class="trades-list" id="tradesList">
            <div class="loading">Loading trades...</div>
        </div>
    </div>
</div>
<script>
const API_BASE = 'https://aurora-realtime.loca.lt';
var scene, camera, renderer, particles, time = 0;
var pnlHistory = [];

function init3D() {
    scene = new THREE.Scene(); scene.background = new THREE.Color(0x030508); scene.fog = new THREE.FogExp2(0x030508, 0.02);
    camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000); camera.position.z = 30;
    renderer = new THREE.WebGLRenderer({canvas:document.getElementById('canvas'), antialias:true}); renderer.setSize(window.innerWidth, window.innerHeight);
    var geometry = new THREE.BufferGeometry(); var count = 1500;
    var positions = new Float32Array(count * 3), colors = new Float32Array(count * 3);
    for(var i=0; i<count; i++) { positions[i*3]=(Math.random()-0.5)*80; positions[i*3+1]=(Math.random()-0.5)*80; positions[i*3+2]=(Math.random()-0.5)*40; var c=new THREE.Color(); c.setHSL(0.5+Math.random()*0.2,0.8,0.5); colors[i*3]=c.r; colors[i*3+1]=c.g; colors[i*3+2]=c.b; }
    geometry.setAttribute('position',new THREE.BufferAttribute(positions,3)); geometry.setAttribute('color',new THREE.BufferAttribute(colors,3));
    var material = new THREE.PointsMaterial({size:0.12,vertexColors:true,transparent:true,opacity:0.8,blending:THREE.AdditiveBlending});
    particles = new THREE.Points(geometry,material); scene.add(particles);
    var grid = new THREE.GridHelper(80,40,0x00f5ff,0x0a1520); grid.position.y=-15; scene.add(grid);
    animate();
}
function animate() { requestAnimationFrame(animate); time+=0.001; particles.rotation.y=time*0.1; camera.position.x=Math.sin(time)*5; camera.position.y=Math.cos(time*0.7)*3; camera.lookAt(0,0,0); renderer.render(scene,camera); }

async function fetchPrices() {
    try {
        var btc = await fetch('https://api.binance.com/api/v3/ticker/price?symbol=BTCUSDT').then(r=>r.json());
        var eth = await fetch('https://api.binance.com/api/v3/ticker/price?symbol=ETHUSDT').then(r=>r.json());
        document.getElementById('btcPrice').textContent = '$' + parseFloat(btc.price).toLocaleString();
        document.getElementById('ethPrice').textContent = '$' + parseFloat(eth.price).toLocaleString();
    } catch(e) { console.log(e); }
}

async function fetchData() {
    try {
        var res = await fetch(API_BASE + '/api/combined');
        var data = await res.json();
        
        document.getElementById('statusDot').className = 'status-dot green';
        document.getElementById('statusText').textContent = 'LIVE';
        
        var aurora = data.aurora || {};
        var hft = data.hft || {};
        var trades = data.trades || [];
        
        // Total stats
        var totalBank = (aurora.bank || 100) + (hft.bank || 100);
        var totalPnl = (aurora.pnl || 0) + (hft.pnl || 0);
        var totalTrades = (aurora.trades || 0) + (hft.trades || 0);
        var totalWins = (aurora.wins || 0) + (hft.wins || 0);
        var winRate = totalTrades > 0 ? (totalWins/totalTrades*100).toFixed(0) : 0;
        
        document.getElementById('totalBank').textContent = '$' + totalBank.toFixed(2);
        var pnlEl = document.getElementById('totalPnl');
        pnlEl.textContent = (totalPnl >= 0 ? '+' : '') + '$' + totalPnl.toFixed(2);
        pnlEl.className = 'value ' + (totalPnl >= 0 ? 'green' : 'red');
        document.getElementById('totalTrades').textContent = totalTrades;
        document.getElementById('winRate').textContent = winRate + '%';
        
        // Aurora stats
        document.getElementById('auroraBank').textContent = '$' + (aurora.bank||100).toFixed(2);
        var apEl = document.getElementById('auroraPnl');
        apEl.textContent = (aurora.pnl>=0?'+':'') + '$' + (aurora.pnl||0).toFixed(2);
        apEl.style.color = aurora.pnl>=0 ? '#00ff88' : '#ff3366';
        document.getElementById('auroraTrades').textContent = aurora.trades || 0;
        document.getElementById('auroraWL').textContent = (aurora.wins||0) + '/' + (aurora.losses||0);
        
        // HFT stats
        document.getElementById('hftBank').textContent = '$' + (hft.bank||100).toFixed(2);
        var hpEl = document.getElementById('hftPnl');
        hpEl.textContent = (hft.pnl>=0?'+':'') + '$' + (hft.pnl||0).toFixed(2);
        hpEl.style.color = hft.pnl>=0 ? '#00ff88' : '#ff3366';
        document.getElementById('hftTrades').textContent = hft.trades || 0;
        document.getElementById('hftWL').textContent = (hft.wins||0) + '/' + (hft.losses||0);
        
        // Trades list
        var tradesList = document.getElementById('tradesList');
        if (trades.length > 0) {
            tradesList.innerHTML = '';
            trades.slice(0,15).forEach(function(t) {
                var div = document.createElement('div');
                div.className = 'trade-item ' + (t.result==='WIN'?'win':'loss');
                div.innerHTML = '<div class="trade-info"><div class="trade-token">'+(t.signal||'')+' '+(t.token||'')+'</div><div class="trade-action">$'+(t.price||0).toFixed(0)+' | '+(t.reasoning||'').substring(0,40)+'...</div></div><div class="trade-result"><div class="trade-pnl '+(t.profit>=0?'positive':'negative')+'">'+(t.profit>=0?'+':'')+'$'+(t.profit||0).toFixed(2)+'</div><div>'+(t.result||'')+'</div></div>';
                tradesList.appendChild(div);
            });
        }
        
        // Chart
        pnlHistory.push(totalBank);
        if (pnlHistory.length > 30) pnlHistory.shift();
        drawChart();
        
    } catch(e) {
        document.getElementById('statusDot').className = 'status-dot red';
        document.getElementById('statusText').textContent = 'Error';
        console.log(e);
    }
}

function drawChart() {
    var canvas = document.getElementById('pnlChart');
    if (!canvas || pnlHistory.length < 2) return;
    var ctx = canvas.getContext('2d');
    var w = canvas.width = canvas.offsetWidth;
    var h = canvas.height = canvas.offsetHeight;
    ctx.clearRect(0,0,w,h);
    var min = Math.min(...pnlHistory), max = Math.max(...pnlHistory), range = max-min||1;
    ctx.strokeStyle = '#00ff88'; ctx.lineWidth = 2; ctx.beginPath();
    pnlHistory.forEach(function(val,i) { var x=(i/(pnlHistory.length-1))*w, y=h-((val-min)/range)*(h-20)-10; i===0?ctx.moveTo(x,y):ctx.lineTo(x,y); }); ctx.stroke();
    ctx.lineTo(w,h); ctx.lineTo(0,h); ctx.closePath();
    var g = ctx.createLinearGradient(0,0,0,h); g.addColorStop(0,'rgba(0,255,136,0.3)'); g.addColorStop(1,'rgba(0,255,136,0)');
    ctx.fillStyle = g; ctx.fill();
    ctx.fillStyle = '#00ff88'; ctx.font = 'bold 14px Orbitron'; ctx.fillText('$'+pnlHistory[pnlHistory.length-1].toFixed(2), w-70, 20);
}

window.onload = function() {
    init3D(); fetchPrices(); fetchData();
    setTimeout(function() { document.getElementById('loading').style.opacity='0'; setTimeout(function(){document.getElementById('loading').style.display='none'},500); }, 1500);
    setInterval(fetchPrices, 5000);
    setInterval(fetchData, 3000);
};
window.onresize = function() { camera.aspect=window.innerWidth/window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth,window.innerHeight); };
</script>
</body>
</html>
